<organization-notifications requires-premium="true"></organization-notifications>

<div class="hbox hbox-auto-xs hbox-auto-sm" refresh-on="PersistentEventChanged PlanChanged" refresh-action="vm.get()" refresh-if="vm.canRefresh(data)" refresh-throttle="10000">
  <div class="col" refresh-on="filterChanged" refresh-action="vm.get()">
    <div class="wrapper-md">
      <div class="row">
        <div class="col-sm-12">
          <div class="row row-sm text-center">
            <div class="col-md-3 col-sm-6 col-xs-6">
              <div class="dashboard-block">
                <div class="rotate">
                  <i class="fa fa-area-chart fa-4x"></i>
                </div>
                <div class="details">
                  <span class="title">Sessions</span>
                  <span class="sub">{{vm.stats.sessions || 0 | number : 0}}</span>
                </div>
              </div>
            </div>
            <div class="col-md-3 col-sm-6 col-xs-6">
              <div class="dashboard-block">
                <div class="rotate">
                  <i class="fa fa-line-chart fa-4x"></i>
                </div>
                <div class="details">
                  <span class="title">Per Hour</span>
                  <span class="sub">{{vm.stats.avg_per_hour || 0 | number : 1}}</span>
                </div>
              </div>
            </div>
            <div class="col-md-3 col-sm-6 col-xs-6">
              <div class="dashboard-block">
                <div class="rotate">
                  <i class="fa fa-users fa-4x"></i>
                </div>
                <div class="details">
                  <span class="title">Users</span>
                  <span class="sub">{{vm.stats.users || 0 | number : 0}}</span>
                </div>
              </div>
            </div>
            <div class="col-md-3 col-sm-6 col-xs-6">
              <div class="dashboard-block">
                <div class="rotate">
                  <i class="fa fa-clock-o fa-4x"></i>
                </div>
                <div class="details">
                  <span class="title">Average Duration</span>
                  <span class="sub"><duration value="vm.stats.avg_duration"></duration></span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading"><i class="fa fa-bar-chart-o"></i>Sessions and Users</div>
        <div class="panel-body">
          <rickshaw options="vm.chart.options" features="vm.chart.features"></rickshaw>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading"><i class="fa fa-area-chart"></i>Recent Sessions</div>
        <sessions settings="vm.recentSessions"></sessions>
      </div>
    </div>
  </div>
</div>
